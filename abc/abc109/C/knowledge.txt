答えとなるのは、現在位置とすべての都市との差の最大公約数になる。

ex)
今、座標81にいて、各都市の座標が[33, 105, 57]とすると、各都市との差は、

dx = [48, 24, 24]

である。そのため、すべての都市に移動できるためには、この３つの差分の最大公約数である必要がある。
なので、dx[0]とdx[1]のgcdを計算し、次に、その結果とdx[2]のgcdを見るというようにして最大公約数を求める。

各都市との差はO(n)で求まり、gcdの計算はO(log(n))で求まるので、最終的にO(nlog(n))となり、十分間に合う。